---
title: "Tidy Tuesday 05/21/2021"
author: "Michael Mullarkey"
date: "`r format(Sys.time(), '%B %d, %Y')`"
output:
  html_document:
    toc: yes
    toc_depth: 5
    toc_float:
      collapsed: no
      smooth_scroll: no
geometry: margin=0.50in
---

```{r setup, include=FALSE, cache = FALSE}
require("knitr")
knitr::opts_chunk$set(echo = FALSE, tidy = TRUE, warning = FALSE, message = FALSE, include = FALSE)
```

# Loading Packages

```{r packages, code_folding = FALSE}

library(tidytuesdayR)
library(tidyverse)
library(janitor)
library(broom)
library(skimr)
library(gt)
library(showtext)
library(ggdist)
library(glue)
library(patchwork)
library(scales)

```

# Reading in the Data

```{r load in the data, code_folding = FALSE}

tt_data <- tt_load("2022-03-22")

```

# Viz% Runs

I'll give myself 5 minutes to make a visual, with up to 10 minutes between runs

Each run I have to clear the environment, recreate the code with no copy-pasting or looking at previous code (once the run starts, can look at the code during the in between run times), and without using outside references (again, can do that during the in between time but not during the run)

```{r}

baby_names <- tt_data$babynames

skim(baby_names)

```

# First Run

```{r}

baby_names %>% 
  group_by(year) %>% 
  summarise(sum_names = sum(n, na.rm = TRUE)) %>% 
  ggplot(aes(x = year, y = sum_names, color = sum_names)) + 
  geom_line() +
  scale_color_viridis_c(option = "plasma") +
  theme_dark() +
  theme(panel.background = element_rect(fill = "black"),
        plot.background = element_rect(fill = "black"),
        legend.background = element_rect(fill = "black"),
        text = element_text(color ="white"),
        axis.text = element_text(color = "white"),
        legend.position = "none") +
  labs(x = "Year",
       y = "Total Number of Names")

```
## Thoughts Between First and Second Runs

I can definitely iterate on this plot, and it could inform cooler plots later in the run

## Practice Between First and Second Runs

```{r}

font_add_google(name = "Oswald",
                family = "oswald")

showtext_auto()

baby_names %>% 
  group_by(year) %>% 
  summarise(sum_names = sum(n, na.rm = TRUE)) %>% 
  ggplot(aes(x = year, y = sum_names, color = sum_names)) + 
  geom_line() +
  scale_color_viridis_c(option = "plasma") +
  theme_dark() +
  theme(panel.background = element_rect(fill = "black"),
        plot.background = element_rect(fill = "black"),
        legend.background = element_rect(fill = "black"),
        text = element_text(color ="white", family = "oswald"),
        axis.text = element_text(color = "white"),
        legend.position = "none") +
  labs(x = "Year",
       y = "Total Number of Names",
       title = "The Total Number of Babies Per Year Has Increased in This Data Over Time") +
  scale_y_continuous(labels = comma)
```

# Second Run

```{r}

baby_names <- tt_data$babynames

font_add_google(name = "Oswald",
                family = "oswald")

showtext.auto()

baby_names %>% 
  group_by(year) %>% 
  summarise(babies_year = sum(n, na.rm = TRUE)) %>% 
  ggplot(aes(x = year, y = babies_year, color = babies_year)) +
  geom_line() +
  scale_color_viridis_c(option = "plasma") +
  theme_dark() +
  theme(legend.position = "none",
        panel.background = element_rect(fill = "black"),
        plot.background = element_rect(fill = "black"),
        text = element_text(color = "white", family = "oswald"),
        axis.text = element_text(color = "white", family = "oswald")) +
  scale_y_continuous(labels = comma) +
  labs(x = "Year",
       y = "# of Babies",
       title = "The Number of Babies Per Year Has Increased in This Data Over Time")

```

## Practice/Scouting Between Second and Third Run

```{r}

life <- tt_data$lifetables

skim(life)

```

```{r}

birth <- tt_data$births

skim(birth)

```

```{r}

baby_names %>% 
  filter(name == "Michael" & sex == "M") %>% 
  # mutate(percent = prop * 100) %>% 
  ggplot(aes(x = year, y = prop, color = prop)) +
  geom_line() +
  scale_color_viridis_c(option = "rocket") +
  theme_minimal() +
  scale_y_continuous(labels = percent)

```

# Third Run

```{r}

baby_names <- tt_data$babynames

baby_names %>% 
  filter(name == "Michael" & sex == "M") %>% 
  ggplot(aes(year, prop, color = prop)) +
  geom_line() +
  scale_color_viridis_c(option = "mako") +
  scale_y_continuous(labels = percent) +
  theme_ggdist() +
  theme(legend.position = "none") +
  labs(x = "Year",
       y = "% of Total Names",
       title = "Michael Peaked in the Mid 1900s (Ouch)",
       subtitle = "As a Percentage of Total Names That Year")

```














































































